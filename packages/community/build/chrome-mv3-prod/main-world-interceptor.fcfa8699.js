var e,o;"function"==typeof(e=globalThis.define)&&(o=e,e=null),function(o,n,t,r,i){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof l[r]&&l[r],s=a.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(e,n){if(!s[e]){if(!o[e]){var t="function"==typeof l[r]&&l[r];if(!n&&t)return t(e,!0);if(a)return a(e,!0);if(d&&"string"==typeof e)return d(e);var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}g.resolve=function(n){var t=o[e][1][n];return null!=t?t:n},g.cache={};var u=s[e]=new c.Module(e);o[e][0].call(u.exports,g,u,u.exports,this)}return s[e].exports;function g(e){var o=g.resolve(e);return!1===o?{}:c(o)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=o,c.cache=s,c.parent=a,c.register=function(e,n){o[e]=[function(e,o){o.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return l[r]}}),l[r]=c;for(var u=0;u<n.length;u++)c(n[u]);if(t){var g=c(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=g:"function"==typeof e&&e.amd?e(function(){return g}):i&&(this[i]=g)}}({LQxHr:[function(e,o,n){var t=e("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"config",()=>r);let r={matches:["https://claude.ai/*"],world:"MAIN",run_at:"document_start"};console.log("[Engram Main World] Initializing network interceptor...");let i=window.fetch,l=null;window.addEventListener("message",e=>{e.source===window&&("ENGRAM_QUEUE_INJECTION"===e.data.type?(l={originalPrompt:e.data.originalPrompt,enrichedPrompt:e.data.enrichedPrompt,timestamp:Date.now()},console.log("[Engram Main World] Queued injection:",{originalLength:e.data.originalPrompt.length,enrichedLength:e.data.enrichedPrompt.length})):"ENGRAM_CLEAR_INJECTION"===e.data.type&&(l=null,console.log("[Engram Main World] Cleared injection")))}),window.fetch=async function(...e){let[o,n]=e,t="string"==typeof o?o:o.url;if((t.includes("chatgpt.com")||t.includes("openai.com"))&&(console.log("[Engram Main World] ChatGPT request:",{method:n?.method||"GET",url:t,hasBody:!!n?.body}),(n?.method==="POST"||n?.method==="PUT")&&n?.body))try{let e="string"==typeof n.body?n.body.substring(0,300):JSON.stringify(n.body).substring(0,300);e.startsWith('{"0":')||console.log("[Engram Main World] ChatGPT body preview:",e)}catch(e){}let r=t.includes("/api/")&&n?.method==="POST"&&n?.body&&(t.includes("chat_conversations")||t.includes("completion")||t.includes("append")||t.includes("message")),a=n?.method==="POST"&&n?.body&&(t.includes("/backend-api/conversation")||t.includes("/backend-api/chat")||t.includes("/backend-anon/conversation")||t.includes("chatgpt.com")&&t.includes("/backend"));if((r||a)&&l){console.log("[Engram Main World] Intercepted API request!",{url:t,isChatGPT:a,isClaude:r});let e=Date.now()-l.timestamp;if(e<3e3)try{let e="string"==typeof n.body?n.body:JSON.stringify(n.body);console.log("[Engram Main World] Request body preview:",e.substring(0,200));let t=JSON.parse(e);console.log("[Engram Main World] Body keys:",Object.keys(t));let r=!1;if(t.prompt&&(console.log("[Engram Main World] Found body.prompt"),t.prompt.trim()===l.originalPrompt.trim()&&(t.prompt=l.enrichedPrompt,r=!0,console.log("[Engram Main World] \u2705 Replaced body.prompt"))),t.message&&"string"==typeof t.message&&(console.log("[Engram Main World] Found body.message"),t.message.trim()===l.originalPrompt.trim()&&(t.message=l.enrichedPrompt,r=!0,console.log("[Engram Main World] \u2705 Replaced body.message"))),t.text&&(console.log("[Engram Main World] Found body.text"),t.text.trim()===l.originalPrompt.trim()&&(t.text=l.enrichedPrompt,r=!0,console.log("[Engram Main World] \u2705 Replaced body.text"))),t.messages&&Array.isArray(t.messages)&&t.messages.length>0){console.log("[Engram Main World] Found body.messages array");let e=t.messages[t.messages.length-1];if(e.content){let o="string"==typeof e.content?e.content:e.content.text;o&&o.trim()===l.originalPrompt.trim()&&("string"==typeof e.content?e.content=l.enrichedPrompt:e.content.text=l.enrichedPrompt,r=!0,console.log("[Engram Main World] \u2705 Replaced body.messages[].content"))}}if(r){console.log("[Engram Main World] \uD83C\uDF89 Successfully modified request!");let e={...n,body:JSON.stringify(t)};return l=null,i.call(window,o,e)}console.warn("[Engram Main World] \u26a0\ufe0f Could not find prompt in request body"),console.log("[Engram Main World] Expected:",l.originalPrompt.substring(0,50)),console.log("[Engram Main World] Full body:",t)}catch(e){console.error("[Engram Main World] Error modifying request:",e)}else console.log("[Engram Main World] Injection expired (age:",e,"ms)"),l=null}return i.call(window,...e)},console.log("[Engram Main World] \u2705 Network interceptor installed successfully")},{"@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],f6DG4:[function(e,o,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,o){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||o.hasOwnProperty(n)||Object.defineProperty(o,n,{enumerable:!0,get:function(){return e[n]}})}),o},n.export=function(e,o,n){Object.defineProperty(e,o,{enumerable:!0,get:n})}},{}]},["LQxHr"],"LQxHr","parcelRequire4feb"),globalThis.define=o;